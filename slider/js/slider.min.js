(function(c){var e=window.izp=window.izp||{};e.slider={};d("slider");c.slider=function(g,f){return new b().init(g,f)};c.fn.slider=function(f){return new b().init(this,f)};function b(){this.setting={};this.currTime=-1;this.defaultConfig={customNav:false,customNavClsName:"",customNavControlClsName:"",mouseover:c.noop,mouseout:c.noop,loop:true,scrollSpeed:500,scrollDelay:4000,animationType:"slide",mouse:"click",controlNav:"h",controlNavLeft:false,controlNavTop:false,controlNavRight:10,controlNavBottom:10,controlShowNum:true,directionNav:"none",itemWidth:640,itemHeight:420,itemMargin:0,items:0,showItems:1,currItem:0,tabList:false,async:false,pauseOnHover:true,keyboardNav:false}}b.prototype={constructor:b,init:function(i,f){if(c.type(f)=="undefined"){f={}}c.extend(this.setting,this.defaultConfig,f);var g=this.setting,h=this;this.container=c(i);this.sliderContainer=this.container.find("div.main");this.sliderULContainer=this.sliderContainer.find("ul.sliders");this.sliderLIContainer=this.sliderULContainer.find(">li");g.itemWidth=g.itemWidth||parseInt($imgs.css("width"));g.itemHeight=g.itemHeight||parseInt($imgs.css("height"));g.itemMargin=g.showItems==1?0:g.itemMargin;if(g.tabList){g.controlNav="none";g.loop=false;this.controlTabList()}g.items=g.items||this.sliderLIContainer.size();if(this.tabListULContainer){g.items=this.tabListLIContainer.size()}g.showItems=g.showItems>g.items?g.items:g.showItems;this.pauseOnHover();this.controlNav();this.directionNav();this.customNav();this.size();this.firstDisplay(g.currItem);this.animation();if(g.loop){this.timer()}if(g.tabList&&g.tabList.autoLoad){this.autoLoadTabList()}return this},customNav:function(){var g=this,f=this.setting;if(f.customNav===true){this.container.find("ul.custom_nav").addClass(f.customNavClsName);this.picContainer=this.container.find("ul.custom_nav li");this.picContainer.hover(function(){f.mouseover(c(this).find("a"))},function(){f.mouseout(c(this).find("a"))});this.hover(this.picContainer,function(){g.clearThread(g.thread,"interval");g.clearThread(g.timerAnimationThread);f.currItem=c(this).index();g.animation(true)},function(){g.clearThread(g.thread,"interval");g.currTime=g.currNum;g.timerAnimation(g.currTime)})}},autoLoadTabList:function(){var f=this.tabListLIContainer.size();for(var g=0;g<f;g++){this.loadTabList(g)}},controlTabList:function(){var g=this,f=this.setting;if(f.tabList){this.tabListULContainer=this.container.find("ul.tab_list");this.tabListLIContainer=this.tabListULContainer.find("li");if(f.mouse=="click"){this.tabListLIContainer.click(function(){var h=f.tabList;var j=c(this).index();if(j==f.currItem){return}f.currItem=j;g.animation(true);g.animation();g.loadTabList(f.currItem)});this.hover(this.tabListLIContainer,function(){c(this).addClass("focus")},function(){c(this).removeClass("focus")})}else{this.hover(this.tabListLIContainer,function(){c(this).addClass("focus");g.clearThread(g.thread,"interval");g.clearThread(g.timerAnimationThread);f.currItem=c(this).index();g.animation(true);g.loadTabList(f.currItem)},function(){c(this).removeClass("focus");g.clearThread(g.thread,"interval");g.currTime=g.currNum;g.timerAnimation(g.currTime)})}}},loadTabList:function(g){var h=this,f=this.setting.tabList;h.tabList=h.tabList||[];if(h.tabList&&c.inArray(g,h.tabList)==-1){c.ajax({url:f.url[g],async:f.async,dataType:f.dataType,success:function(i){h.tabList.push(g);f.succCallback(i,h.sliderLIContainer.eq(g))},fail:function(){f.failCallback()}})}},pauseOnHover:function(){var f=this.setting,g=this;if(f.pauseOnHover){this.hover(this.sliderLIContainer,function(){g.clearThread(g.thread,"interval");g.clearThread(g.timerThread,"interval")},function(){g.clearThread(g.thread,"interval");g.currTime=g.currNum;g.timerAnimation(g.currTime)})}},controlNav:function(){var g=this,f=this.setting;if(f.controlNav!="none"){this.createControlNav(f);this.controlNavContainer=this.sliderContainer.find("ul.control_nav");this.controlNavLIContainer=this.controlNavContainer.find("li");this.controlNavPos(f.controlNavLeft,f.controlNavTop,f.controlNavRight,f.controlNavBottom);this.controlNavContainer.addClass(f.controlNav=="h"?"control_nav_h":"control_nav_v");if(f.controlShowNum){this.controlNavContainer.addClass("control_nav_num")}if(f.mouse=="click"){this.controlNavLIContainer.click(function(){var h=c(this).index();if(h==f.currItem){return}f.currItem=h;g.animation(true);g.animation()});this.hover(this.controlNavLIContainer,function(){c(this).addClass("focus")},function(){c(this).removeClass("focus")})}else{this.hover(this.controlNavLIContainer,function(){c(this).addClass("focus");g.clearThread(g.thread,"interval");g.clearThread(g.timerAnimationThread);f.currItem=c(this).index();g.animation(true)},function(){c(this).removeClass("focus");g.clearThread(g.thread,"interval");g.currTime=g.currNum;g.timerAnimation(g.currTime)})}}},createControlNav:function(j){var k=['<ul class="control_nav">'],l=j.controlShowNum,g="",f=Math.ceil(j.items/j.showItems);for(var h=0;h<f;h++){g=l?h+1:"";k[k.length]="<li><a>"+g+"</a></li>"}k[k.length]="</ul>";this.sliderContainer.append(k.join(""))},controlNavPos:function(j,i,h,f){var g={};if(j){g.paddingLeft=j;g.left=0}if(i){g.paddingTop=i;g.top=0}if(h){g.paddingRight=h;g.right=0}if(f){g.paddingBottom=f;g.bottom=0}this.controlNavContainer.css(g)},directionNav:function(){var g=this,f=this.setting;if(f.directionNav!="none"){this.createDirectionNav(f.directionNav);this.directionNavContainer=this.sliderContainer.find("ul.direction_nav");this.preBtn=this.directionNavContainer.find("[class^=slider_prev]");this.nextBtn=this.directionNavContainer.find("[class^=slider_next]");this.preBtn.mousedown(function(){if(g.sliderULContainer.is(":animated")){return}f.currItem--;g.animation(true)});this.nextBtn.mousedown(function(){if(g.sliderULContainer.is(":animated")){return}f.currItem++;g.animation(true)});this.preBtn.hover(function(){c(this).addClass("focus");g.clearThread(g.thread,"interval");g.clearThread(g.timerThread,"interval");g.clearThread(g.timerAnimationThread)},function(){c(this).removeClass("focus");g.clearThread(g.thread,"interval");g.currTime=g.currNum;g.timerAnimation(g.currTime)});this.nextBtn.hover(function(){c(this).addClass("focus");g.clearThread(g.thread,"interval");g.clearThread(g.timerThread,"interval");g.clearThread(g.timerAnimationThread)},function(){c(this).removeClass("focus");g.clearThread(g.thread,"interval");g.currTime=g.currNum;g.timerAnimation(g.currTime)})}},createDirectionNav:function(f){var i="",g="";if(f!=="v"){f="h";i="<";g=">"}var h='<ul class="direction_nav"><li><a class="slider_prev_'+f+'">'+i+'</a></li><li><a class="slider_next_'+f+'">'+g+"</a></li></ul>";this.sliderContainer.append(h)},size:function(){var f=this.setting,g,j,i,h;this.sliderLIContainer.css("margin",f.itemMargin);this.sliderULContainer.addClass(f.animationType);g=f.itemWidth+f.itemMargin*2;j=f.itemHeight+f.itemMargin*2;i=g;h=j;if(f.animationType=="fade"){}else{if(f.animationType=="slide_h"||f.animationType=="slide"){i=i*f.items;g=g*f.showItems}else{if(f.animationType=="slide_v"){h=h*f.items;j=j*f.showItems}}}this.sliderContainer.css({width:g,height:j});this.sliderULContainer.css({width:i,height:h});this.sliderLIContainer.css({width:f.itemWidth,height:f.itemHeight,overflow:"hidden"})},firstDisplay:function(f){var g=this.setting.animationType;if(g=="fade"){this.sliderLIContainer.hide().eq(f).show()}this.animation(g,true)},timerAnimation:function(g){var i=this,h=this.setting,f=g!=-1?h.scrollDelay-g*1000:h.scrollDelay;this.currTime=-1;i.currNum=0;if(i.timerAnimationThread){clearTimeout(i.timerAnimationThread)}i.timerAnimationThread=setTimeout(function(){i.timer();h.currItem++;i.animation(true);i.animation()},f)},timer:function(){var f=this;f.currNum=0;this.timerThread=setInterval(function(){f.currNum++;if(f.currNum==f.setting.scrollDelay/1000){f.currNum=0}},1000)},animation:function(g){var i=this,h=this.setting,f=h.animationType=="fade"?"fadeAnim":"slideAnim";this.clearThread(this.thread,"interval");this.currNum=0;if(g){i[f]()}else{if(h.loop){this.thread=setInterval(function(){h.currItem++;i[f]()},h.scrollDelay)}}},fadeAnim:function(){var g=this,f=g.setting;g.changeMinMax();g.sliderLIContainer.eq(g.pre).fadeOut(f.scrollSpeed);g.sliderLIContainer.eq(f.currItem).fadeIn(f.scrollSpeed);g.controlNavLIContainer?g.controlNavLIContainer.removeClass("curr").eq(f.currItem).addClass("curr"):"";g.tabListLIContainer?g.tabListLIContainer.removeClass("curr").eq(f.currItem).addClass("curr"):"";g.pre=f.currItem},slideAnim:function(){var l=this,r=l.setting,p=Math.ceil(r.items/r.showItems)-1,j={},m,q,o=function(){},i="left",f="Width",h={},k,n=r.scrollSpeed,g=r.currItem;if(r.animationType=="slide_v"){i="top";f="Height"}if(g==-1){h.position="relative";h[i]="-"+l.sliderULContainer.css(f.toLowerCase());if(r.showItems===1){l.sliderLIContainer.last().css(h)}else{l.sliderLIContainer.slice(-r.showItems).css(h)}k=Math.ceil(r.items/r.showItems);o=function(){h.position="";h[i]="";if(r.showItems===1){l.sliderLIContainer.last().css(h)}else{l.sliderLIContainer.slice(-r.showItems).css(h)}r.currItem=p;h={};h[i]=-r.currItem*(r["item"+f]+r.itemMargin*2)*r.showItems;l.sliderULContainer.css(h)}}else{if(g<-1){r.currItem=-1}}if(g==p+1){h.position="relative";h[i]=l.sliderULContainer.css(f.toLowerCase());if(r.showItems===1){l.sliderLIContainer.first().css(h)}else{l.sliderLIContainer.slice(0,r.showItems).css(h)}k=0;o=function(){h.position="";h[i]="";if(r.showItems===1){l.sliderLIContainer.first().css(h)}else{l.sliderLIContainer.slice(0,r.showItems).css(h)}r.currItem=0;h={};h[i]=0;l.sliderULContainer.css(h)};o.flag=true}else{if(g>p+1){r.currItem=p}}m=g*(r["item"+f]+r.itemMargin*2)*r.showItems;j[i]=-m;if(typeof k=="undefined"){k=g}l.controlNavLIContainer?l.controlNavLIContainer.removeClass("curr").eq(k).addClass("curr"):"";l.picContainer&&r.customNavControlClsName?l.picContainer.removeClass(r.customNavControlClsName).eq(k).addClass(r.customNavControlClsName):"";l.tabListLIContainer?l.tabListLIContainer.removeClass("curr").eq(g).addClass("curr"):"";l.params=j;l.paramsFn=o;l.sliderULContainer.animate(j,n,"swing",o)},changeMinMax:function(){var g=this.setting,f=Math.ceil(g.items/g.showItems)-1;if(g.currItem>f){g.currItem=0}else{if(g.currItem<0){g.currItem=f}}},hover:function(i,h,g,f){var j=this;h=h||c.noop();g=g||c.noop();f=f||200;i.hover(function(){var k=this;j.hoverThread=setTimeout(function(){h.call(k)},f)},function(){j.clearThread(j.hoverThread);g.call(this)})},clearThread:function(g,f){if(g){if(f=="interval"){clearInterval(g)}else{clearTimeout(g)}}},desdroy:function(){this.clearThread(this.thread,"interval");this.clearThread(this.timerThread,"interval");this.clearThread(this.hoverThread);this.clearThread(this.timerAnimationThread);this.container=null;this.sliderContainer=null;this.sliderULContainer=null;this.sliderLIContainer=null;this.tabListULContainer=null;this.tabListLIContainer=null;this.directionNavContainer=null;this.controlNavContainer=null;this.controlNavLIContainer=null;this.preBtn=null;this.nextBtn=null}};function d(g){var h=a(g)+"css/"+g+".min.css",f=c("<link>");f.attr({type:"text/css",rel:"stylesheet",href:h});c("head")[0].appendChild(f[0])}function a(f){var g="";c("script").each(function(){var h=c(this).prop("src").toLowerCase();var i=h.indexOf("js/"+f+".min.js");i=i>=0?i:h.indexOf("js/"+f+".js");if(i>=0){g=h.substr(0,i);return false}});return g}})(jQuery);
